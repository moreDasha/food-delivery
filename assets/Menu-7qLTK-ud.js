import{a as j,r as u,j as t,c as g,u as v,b as C,L as b,d as _,M as w,T as P,E,e as S,N as A}from"./index-DKG25Wwx.js";const{Axios:F,AxiosError:L,CanceledError:M,isCancel:$,CancelToken:H,VERSION:O,all:J,Cancel:V,isAxiosError:z,spread:B,toFormData:G,AxiosHeaders:K,HttpStatusCode:Q,formToJSON:U,getAdapter:W,mergeConfig:X}=j,T="_menu_8mxho_1",x={"menu-header":"_menu-header_8mxho_1",menu:T},m={"input-search-wrap":"_input-search-wrap_1qcdm_1","input-search":"_input-search_1qcdm_1","input-search-icon":"_input-search-icon_1qcdm_23"},y=u.forwardRef(function({...a},o){return t.jsxs("div",{className:m["input-search-wrap"],children:[t.jsx("span",{className:m["input-search-icon"],children:t.jsx("img",{src:"img/icons/search.svg",alt:"search icon"})}),t.jsx("input",{className:g(m["input-search"]),ref:o,...a})]})}),c={"product-card":"_product-card_r7k7s_1","product-card-inner":"_product-card-inner_r7k7s_5","product-img":"_product-img_r7k7s_15","card-added":"_card-added_r7k7s_21","product-price":"_product-price_r7k7s_30","product-rating":"_product-rating_r7k7s_31","product-info":"_product-info_r7k7s_69","product-name":"_product-name_r7k7s_77","product-composition":"_product-composition_r7k7s_90","product-cart-btn-wrap":"_product-cart-btn-wrap_r7k7s_101","product-cart-add-btn":"_product-cart-add-btn_r7k7s_117","product-cart-remove-btn":"_product-cart-remove-btn_r7k7s_118","product-cart-counter":"_product-cart-counter_r7k7s_164"},I=s=>{const a=v(),e=C(i=>i.cart.products).find(i=>i.id===s.id),n=()=>{a(_.addProduct(s.id))},l=()=>{a(_.decreaseProductAmount(s.id))};return t.jsxs("article",{className:g(c["product-card"],{[c["card-added"]]:e}),children:[t.jsxs("div",{className:c["product-card-inner"],children:[t.jsxs("div",{className:c["product-img"],children:[t.jsx("img",{src:s.img,alt:"food photo"}),t.jsxs("div",{className:c["product-price"],children:[s.price," ",t.jsx("span",{children:"₽"})]}),t.jsxs("div",{className:c["product-rating"],children:[s.rating,t.jsx("span",{children:t.jsx("img",{src:"img/icons/star.svg",alt:"star icon"})})]})]}),t.jsxs("div",{className:c["product-info"],children:[t.jsx(b,{to:`/product/${s.id}`,className:c["product-name"],children:s.name}),t.jsx("p",{className:c["product-composition"],children:s.composition})]})]}),t.jsxs("div",{className:c["product-cart-btn-wrap"],children:[t.jsx("button",{className:c["product-cart-remove-btn"],onClick:l,children:t.jsx("span",{children:"−"})}),t.jsx("span",{className:c["product-cart-counter"],children:e==null?void 0:e.amount}),t.jsxs("button",{className:c["product-cart-add-btn"],onClick:n,children:[t.jsx("span",{children:t.jsx("img",{src:"img/icons/cart-white.svg",alt:"cart icon"})}),t.jsx("span",{children:"+"})]})]})]})};function D(s,a){return function(...e){const n=this.lastCall;this.lastCall=Date.now(),n&&this.lastCall-n<=a&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{s(...e)},a)}}function Y(){const[s,a]=u.useState([]),[o,e]=u.useState(!1),[n,l]=u.useState(),[i,f]=u.useState(),N=async r=>{try{e(!0),await new Promise(p=>{setTimeout(()=>{p()},1500)});const{data:d}=await j.get("https://moredasha.github.io/food-delivery/backend/products.json");if(!r)a(d),e(!1);else{const p=d.filter(h=>h.name.toLowerCase().includes(r)||h.composition.toLowerCase().includes(r));a(p),e(!1)}}catch(d){console.error(d),d instanceof L&&l(d.message),e(!1);return}},k=D(r=>{f(r.target.value.toLowerCase())},500).bind({});return u.useEffect(()=>{N(i)},[i]),t.jsxs(w,{children:[t.jsxs("div",{className:x["menu-header"],children:[t.jsx(P,{children:"Меню"}),t.jsx(y,{placeholder:"Введите блюдо или состав",onChange:k})]}),n&&t.jsx(E,{text:n}),o&&t.jsx(S,{text:"Загружаем меню"}),!o&&s.length>0&&t.jsx("div",{className:x.menu,children:s.map(r=>t.jsx(I,{id:r.id,name:r.name,composition:r.composition,price:r.price,rating:r.rating,img:r.img},r.id))}),!o&&s.length===0&&t.jsx(A,{text:"По вашему запросу ничего не найдено"})]})}export{Y as Menu,Y as default};
