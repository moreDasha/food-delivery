import{a as g,r as i,j as s,c as j,u as b,b as w,L as C,d as _,M as q,T as E,E as S,e as P,N as y}from"./index-CsLjOJVu.js";const{Axios:R,AxiosError:A,CanceledError:z,isCancel:M,CancelToken:$,VERSION:D,all:F,Cancel:H,isAxiosError:O,spread:J,toFormData:V,AxiosHeaders:B,HttpStatusCode:G,formToJSON:K,getAdapter:Q,mergeConfig:U}=g,L="_menu_8ya4g_1",h={"menu-header":"_menu-header_8ya4g_1",menu:L},m={"input-search-wrap":"_input-search-wrap_pzs6o_1","input-search":"_input-search_pzs6o_1","input-search-icon":"_input-search-icon_pzs6o_21"},k=i.forwardRef(function({...a},o){return s.jsxs("div",{className:m["input-search-wrap"],children:[s.jsx("span",{className:m["input-search-icon"],children:s.jsx("img",{src:"img/icons/search.svg",alt:"search icon"})}),s.jsx("input",{className:j(m["input-search"]),ref:o,...a})]})}),e={"product-card":"_product-card_1xeq9_1","product-card-inner":"_product-card-inner_1xeq9_5","product-img":"_product-img_1xeq9_15","card-added":"_card-added_1xeq9_21","product-price":"_product-price_1xeq9_30","product-rating":"_product-rating_1xeq9_31","product-info":"_product-info_1xeq9_69","product-name":"_product-name_1xeq9_77","product-composition":"_product-composition_1xeq9_90","product-cart-btn-wrap":"_product-cart-btn-wrap_1xeq9_100","product-cart-add-btn":"_product-cart-add-btn_1xeq9_116","product-cart-remove-btn":"_product-cart-remove-btn_1xeq9_117","product-cart-counter":"_product-cart-counter_1xeq9_163"},I=t=>{const a=b(),r=w(n=>n.cart.products).find(n=>n.id===t.id),u=()=>{a(_.addProduct(t.id))},p=()=>{a(_.decreaseProductAmount(t.id))};return s.jsxs("article",{className:j(e["product-card"],{[e["card-added"]]:r}),children:[s.jsxs("div",{className:e["product-card-inner"],children:[s.jsxs("div",{className:e["product-img"],children:[s.jsx("img",{src:t.img,alt:"food photo"}),s.jsxs("div",{className:e["product-price"],children:[t.price," ",s.jsx("span",{children:"₽"})]}),s.jsxs("div",{className:e["product-rating"],children:[t.rating,s.jsx("span",{children:s.jsx("img",{src:"img/icons/star.svg",alt:"star icon"})})]})]}),s.jsxs("div",{className:e["product-info"],children:[s.jsx(C,{to:`/product/${t.id}`,className:e["product-name"],children:t.name}),s.jsx("p",{className:e["product-composition"],children:t.composition})]})]}),s.jsxs("div",{className:e["product-cart-btn-wrap"],children:[s.jsx("button",{className:e["product-cart-remove-btn"],onClick:p,children:s.jsx("span",{children:"−"})}),s.jsx("span",{className:e["product-cart-counter"],children:r==null?void 0:r.amount}),s.jsxs("button",{className:e["product-cart-add-btn"],onClick:u,children:[s.jsx("span",{children:s.jsx("img",{src:"img/icons/cart-white.svg",alt:"cart icon"})}),s.jsx("span",{children:"+"})]})]})]})};function W(){const[t,a]=i.useState([]),[o,r]=i.useState(!1),[u,p]=i.useState(),[n,f]=i.useState(),N=async c=>{try{r(!0),await new Promise(l=>{setTimeout(()=>{l()},1500)});const{data:d}=await g.get("https://moredasha.github.io/food-delivery/backend/products.json");if(!c)a(d),r(!1);else{const l=d.filter(x=>x.name.toLowerCase().includes(c)||x.composition.toLowerCase().includes(c));a(l),r(!1)}}catch(d){console.error(d),d instanceof A&&p(d.message),r(!1);return}},v=c=>{f(c.target.value.toLowerCase())};return i.useEffect(()=>{N(n)},[n]),s.jsxs(q,{children:[s.jsxs("div",{className:h["menu-header"],children:[s.jsx(E,{children:"Меню"}),s.jsx(k,{placeholder:"Введите блюдо или состав",onChange:v})]}),u&&s.jsx(S,{text:u}),o&&s.jsx(P,{text:"Загружаем меню"}),!o&&t.length>0&&s.jsx("div",{className:h.menu,children:t.map(c=>s.jsx(I,{id:c.id,name:c.name,composition:c.composition,price:c.price,rating:c.rating,img:c.img},c.id))}),!o&&t.length===0&&s.jsx(y,{text:"По вашему запросу ничего не найдено"})]})}export{W as Menu,W as default};
