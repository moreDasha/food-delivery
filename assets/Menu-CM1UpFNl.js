import{a as j,r as i,j as c,c as g,u as v,b as k,L as q,d as x,T as b,E as C,e as E,N as P}from"./index-uYzfV5Oj.js";const{Axios:T,AxiosError:S,CanceledError:R,isCancel:$,CancelToken:D,VERSION:F,all:H,Cancel:O,isAxiosError:J,spread:M,toFormData:V,AxiosHeaders:z,HttpStatusCode:B,formToJSON:G,getAdapter:K,mergeConfig:Q}=j,L="_menu_24q31_1",m={menu:L,"menu-header":"_menu-header_24q31_7","menu-main":"_menu-main_24q31_13"},_={"input-search-wrap":"_input-search-wrap_1x1f1_1","input-search":"_input-search_1x1f1_1","input-search-icon":"_input-search-icon_1x1f1_21"},y=i.forwardRef(function({...n},e){return c.jsxs("div",{className:_["input-search-wrap"],children:[c.jsx("span",{className:_["input-search-icon"],children:c.jsx("img",{src:"img/icons/search.svg",alt:"search icon"})}),c.jsx("input",{className:g(_["input-search"]),ref:e,...n})]})}),s={"product-card":"_product-card_wucqk_1","product-card-inner":"_product-card-inner_wucqk_5","product-img":"_product-img_wucqk_15","card-added":"_card-added_wucqk_21","product-price":"_product-price_wucqk_30","product-rating":"_product-rating_wucqk_31","product-info":"_product-info_wucqk_69","product-name":"_product-name_wucqk_77","product-composition":"_product-composition_wucqk_90","product-cart-btn-wrap":"_product-cart-btn-wrap_wucqk_100","product-cart-add-btn":"_product-cart-add-btn_wucqk_114","product-cart-remove-btn":"_product-cart-remove-btn_wucqk_115","product-cart-counter":"_product-cart-counter_wucqk_155"},A=t=>{var l;const n=v(),e=k(a=>a.cart.products),o=()=>{n(x.addProduct(t.id))},u=()=>{n(x.removeProduct(t.id))};return c.jsxs("article",{className:g(s["product-card"],{[s["card-added"]]:e.find(a=>a.id===t.id)}),children:[c.jsxs("div",{className:s["product-card-inner"],children:[c.jsxs("div",{className:s["product-img"],children:[c.jsx("img",{src:t.img,alt:"food photo"}),c.jsxs("div",{className:s["product-price"],children:[t.price," ",c.jsx("span",{children:"₽"})]}),c.jsxs("div",{className:s["product-rating"],children:[t.rating,c.jsx("span",{children:c.jsx("img",{src:"img/icons/star.svg",alt:"star icon"})})]})]}),c.jsxs("div",{className:s["product-info"],children:[c.jsx(q,{to:`/product/${t.id}`,className:s["product-name"],children:t.name}),c.jsx("p",{className:s["product-composition"],children:t.composition})]})]}),c.jsxs("div",{className:s["product-cart-btn-wrap"],children:[c.jsx("button",{className:s["product-cart-remove-btn"],onClick:u,children:c.jsx("span",{children:"−"})}),c.jsx("span",{className:s["product-cart-counter"],children:(l=e.find(a=>a.id===t.id))==null?void 0:l.amount}),c.jsxs("button",{className:s["product-cart-add-btn"],onClick:o,children:[c.jsx("span",{children:c.jsx("img",{src:"img/icons/cart-white.svg",alt:"cart icon"})}),c.jsx("span",{children:"+"})]})]})]})};function U(){const[t,n]=i.useState([]),[e,o]=i.useState(!1),[u,l]=i.useState(),[a,f]=i.useState(),w=async r=>{try{o(!0),await new Promise(p=>{setTimeout(()=>{p()},1500)});const{data:d}=await j.get("https://moredasha.github.io/food-delivery/backend/products.json");if(!r)n(d),o(!1);else{const p=d.filter(h=>h.name.toLowerCase().includes(r)||h.composition.toLowerCase().includes(r));n(p),o(!1)}}catch(d){console.error(d),d instanceof S&&l(d.message),o(!1);return}},N=r=>{f(r.target.value.toLowerCase())};return i.useEffect(()=>{w(a)},[a]),c.jsxs("div",{className:m.menu,children:[c.jsxs("div",{className:m["menu-header"],children:[c.jsx(b,{children:"Меню"}),c.jsx(y,{placeholder:"Введите блюдо или состав",onChange:N})]}),u&&c.jsx(C,{text:u}),e&&c.jsx(E,{text:"Загружаем меню"}),!e&&t.length>0&&c.jsx("div",{className:m["menu-main"],children:t.map(r=>c.jsx(A,{id:r.id,name:r.name,composition:r.composition,price:r.price,rating:r.rating,img:r.img},r.id))}),!e&&t.length===0&&c.jsx(P,{text:"По вашему запросу ничего не найдено"})]})}export{U as Menu,U as default};
